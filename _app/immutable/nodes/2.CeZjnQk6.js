import{r as le,s as R,n as U,i as ce,a as de,o as _e}from"../chunks/scheduler.Ce_0Mfso.js";import{l as E,n as N,S as V,i as W,e as z,t as Q,c as I,a as F,b as Z,d as g,o as b,g as k,h as X,C as se,D as H,j as ie,u as O,s as Y,v as A,f as S,z as ee,w as P,E as pe,x as q,A as te,B as ne,q as me,m as he,k as x,y as ye}from"../chunks/index.CKV1AsfL.js";function oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ge(t,e){E(t,1,1,()=>{e.delete(t.key)})}function ve(t,e,n,l,u,o,a,s,i,f,r,d){let _=t.length,y=o.length,m=_;const C={};for(;m--;)C[t[m].key]=m;const v=[],B=new Map,h=new Map,c=[];for(m=y;m--;){const w=d(u,o,m),M=n(w);let T=a.get(M);T?c.push(()=>T.p(w,e)):(T=f(M,w),T.c()),B.set(M,v[m]=T),M in C&&h.set(M,Math.abs(m-C[M]))}const p=new Set,j=new Set;function D(w){N(w,1),w.m(s,r),a.set(w.key,w),r=w.first,y--}for(;_&&y;){const w=v[y-1],M=t[_-1],T=w.key,L=M.key;w===M?(r=w.first,_--,y--):B.has(L)?!a.has(T)||p.has(T)?D(w):j.has(L)?_--:h.get(T)>h.get(L)?(j.add(T),D(w)):(p.add(L),_--):(i(M,a),_--)}for(;_--;){const w=t[_];B.has(w.key)||i(w,a)}for(;y;)D(v[y-1]);return le(c),v}const be=!0,Ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:be},Symbol.toStringTag,{value:"Module"}));function we(t){let e,n,l,u,o,a,s;return{c(){e=z("div"),n=z("label"),l=Q(t[0]),u=Q(`:
		`),o=z("input"),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=F(e);n=I(f,"LABEL",{class:!0});var r=F(n);l=Z(r,t[0]),u=Z(r,`:
		`),o=I(r,"INPUT",{type:!0,placeholder:!0,class:!0}),r.forEach(g),f.forEach(g),this.h()},h(){b(o,"type","text"),b(o,"placeholder","Enter a number"),b(o,"class","svelte-twozhd"),b(n,"class","svelte-twozhd"),b(e,"class","form-group svelte-twozhd")},m(i,f){k(i,e,f),X(e,n),X(n,l),X(n,u),X(n,o),se(o,t[1]),a||(s=[H(o,"input",t[6]),H(o,"input",t[2])],a=!0)},p(i,[f]){f&1&&ie(l,i[0]),f&2&&o.value!==i[1]&&se(o,i[1])},i:U,o:U,d(i){i&&g(e),a=!1,le(s)}}}function ke(t,e,n){let{label:l}=e,{validator:u=()=>!0}=e,{value:o}=e,{update:a}=e,s=""+o;function i(){const r=parseFloat(s);!isNaN(r)&&u(r)&&(n(3,o=r),a(o))}function f(){s=this.value,n(1,s),n(3,o)}return t.$$set=r=>{"label"in r&&n(0,l=r.label),"validator"in r&&n(4,u=r.validator),"value"in r&&n(3,o=r.value),"update"in r&&n(5,a=r.update)},t.$$.update=()=>{t.$$.dirty&8&&n(1,s=""+o)},[l,s,i,o,u,a,f]}class J extends V{constructor(e){super(),W(this,e,ke,we,R,{label:0,validator:4,value:3,update:5})}}function Ce(t){let e,n,l,u,o,a,s,i,f,r,d,_,y,m,C="delete",v,B,h;return n=new J({props:{label:"Mass",value:t[0].mass,update:t[10]}}),u=new J({props:{label:"Radius",value:t[0].radius,update:t[11]}}),a=new J({props:{label:"Y position",value:t[0].position.y,update:t[12]}}),i=new J({props:{label:"X position",value:t[0].position.x,update:t[13]}}),r=new J({props:{label:"Y velocity",value:t[0].velocity.y,update:t[14]}}),_=new J({props:{label:"X velocity",value:t[0].velocity.x,update:t[15]}}),{c(){e=z("form"),O(n.$$.fragment),l=Y(),O(u.$$.fragment),o=Y(),O(a.$$.fragment),s=Y(),O(i.$$.fragment),f=Y(),O(r.$$.fragment),d=Y(),O(_.$$.fragment),y=Y(),m=z("button"),m.textContent=C},l(c){e=I(c,"FORM",{});var p=F(e);A(n.$$.fragment,p),l=S(p),A(u.$$.fragment,p),o=S(p),A(a.$$.fragment,p),s=S(p),A(i.$$.fragment,p),f=S(p),A(r.$$.fragment,p),d=S(p),A(_.$$.fragment,p),p.forEach(g),y=S(c),m=I(c,"BUTTON",{"data-svelte-h":!0}),ee(m)!=="svelte-1sws9pr"&&(m.textContent=C)},m(c,p){k(c,e,p),P(n,e,null),X(e,l),P(u,e,null),X(e,o),P(a,e,null),X(e,s),P(i,e,null),X(e,f),P(r,e,null),X(e,d),P(_,e,null),k(c,y,p),k(c,m,p),v=!0,B||(h=[H(e,"submit",pe(Be)),H(m,"click",function(){ce(t[1])&&t[1].apply(this,arguments)})],B=!0)},p(c,[p]){t=c;const j={};p&1&&(j.value=t[0].mass),p&8&&(j.update=t[10]),n.$set(j);const D={};p&1&&(D.value=t[0].radius),p&4&&(D.update=t[11]),u.$set(D);const w={};p&1&&(w.value=t[0].position.y),p&128&&(w.update=t[12]),a.$set(w);const M={};p&1&&(M.value=t[0].position.x),p&64&&(M.update=t[13]),i.$set(M);const T={};p&1&&(T.value=t[0].velocity.y),p&32&&(T.update=t[14]),r.$set(T);const L={};p&1&&(L.value=t[0].velocity.x),p&16&&(L.update=t[15]),_.$set(L)},i(c){v||(N(n.$$.fragment,c),N(u.$$.fragment,c),N(a.$$.fragment,c),N(i.$$.fragment,c),N(r.$$.fragment,c),N(_.$$.fragment,c),v=!0)},o(c){E(n.$$.fragment,c),E(u.$$.fragment,c),E(a.$$.fragment,c),E(i.$$.fragment,c),E(r.$$.fragment,c),E(_.$$.fragment,c),v=!1},d(c){c&&(g(e),g(y),g(m)),q(n),q(u),q(a),q(i),q(r),q(_),B=!1,le(h)}}}const Be=()=>{};function Me(t,e,n){let{ball:l}=e,{update:u}=e,{remove:o}=e,a,s,i,f,r,d;function _(){u({mass:s,radius:a,position:{x:r,y:d},velocity:{x:i,y:f}})}const y=c=>{n(3,s=c),_()},m=c=>{n(2,a=c),_()},C=c=>{n(7,d=c),_()},v=c=>{n(6,r=c),_()},B=c=>{n(5,f=c),_()},h=c=>{n(4,i=c),_()};return t.$$set=c=>{"ball"in c&&n(0,l=c.ball),"update"in c&&n(9,u=c.update),"remove"in c&&n(1,o=c.remove)},t.$$.update=()=>{t.$$.dirty&1&&(n(2,a=l.radius),n(3,s=l.mass),n(4,i=l.velocity.x),n(5,f=l.velocity.y),n(6,r=l.position.x),n(7,d=l.position.y))},[l,o,a,s,i,f,r,d,_,u,y,m,C,v,B,h]}class Te extends V{constructor(e){super(),W(this,e,Me,Ce,R,{ball:0,update:9,remove:1})}}const $={width:50,height:25};function Ee(t,e){const n=je(t,e);if(n>0)return n}function Ne(t){const e=t.velocity.y<0,n=t.velocity.x<0;let l=null,u=null;const o=e?t.radius:$.height-t.radius,a=n?t.radius:$.width-t.radius,{y:s,x:i}=t.position,{y:f,x:r}=t.velocity;if(u=(a-i)/r,l=(o-s)/f,(l<0||isNaN(l))&&(l=null),(u<0||isNaN(u))&&(u=null),u!==null&&(l===null||u<l))return{wall:n?"left":"right",time:u};if(l!==null&&(u===null||l<u))return{wall:e?"top":"bottom",time:l}}function Xe(t){let e;for(let n=0;n<t.length;n++){for(let u=n+1;u<t.length;u++){const o=Ee(t[n],t[u]);o!==void 0&&(e===void 0||e.time>o)&&(e={time:o,i:n,j:u})}const l=Ne(t[n]);l!==void 0&&(e===void 0||l.time<e.time)&&(e={time:l.time,i:n,j:l.wall==="top"||l.wall==="bottom"?-1:-2})}return e}function Ye(t,e){const n=[];for(const l of t){const u=Ie(l);u.position={x:l.position.x+l.velocity.x*e,y:l.position.y+l.velocity.y*e},n.push(u)}return n}function G(t){const e=Xe(t);if(e===void 0)return;const n=Ye(t,e.time);return e.j>=0?ze(n[e.i],n[e.j]):e.j===-1?n[e.i].velocity.y=n[e.i].velocity.y*-1:e.j===-2&&(n[e.i].velocity.x=n[e.i].velocity.x*-1),[n,e.time]}function K(t,e){let n=Math.cos(e),l=Math.sin(e);return[t.x*n+t.y*l,-t.x*l+t.y*n]}function Se(t,e){return Math.atan2(e.position.y-t.position.y,e.position.x-t.position.x)}function ze(t,e){const n=Se(t,e),[l,u]=K(t.velocity,n),[o,a]=K(e.velocity,n),s=t.mass+e.mass,i=(t.mass-e.mass)/s*l+2*e.mass/s*o,f=2*t.mass/s*l+(e.mass-t.mass)/s*o,[r,d]=K({x:i,y:u},-n),[_,y]=K({x:f,y:a},-n);t.velocity={x:r,y:d},e.velocity={x:_,y}}function Ie(t){return JSON.parse(JSON.stringify(t))}function je(t,e){const{x:n,y:l}=t.position,{x:u,y:o}=t.velocity,{x:a,y:s}=e.position,{x:i,y:f}=e.velocity,r=t.radius+e.radius,d=a-n,_=s-l,y=i-u,m=f-o,C=y**2+m**2,v=2*(d*y+_*m),B=d**2+_**2-r**2;return(-v-Math.sqrt(v**2-4*C*B))/(2*C)}function Oe(t){let e,n,l,u,o,a,s,i,f;return{c(){e=te("circle"),u=Y(),o=te("text"),a=Q(t[3]),this.h()},l(r){e=ne(r,"circle",{style:!0,cx:!0,cy:!0,fill:!0,r:!0});var d=F(e);d.forEach(g),u=S(r),o=ne(r,"text",{style:!0,"text-anchor":!0,"dominant-baseline":!0,class:!0});var _=F(o);a=Z(_,t[3]),_.forEach(g),this.h()},h(){b(e,"style",n=`transition: transform ${t[1]}s cubic-bezier(0, 0, 1, 1); 
		transform: translate(${t[6]}px, ${t[5]}px)`),b(e,"cx","0"),b(e,"cy","0"),b(e,"fill",l=`hsl(${t[2]},100%,70%)`),b(e,"r",t[0]),b(o,"style",s=`transition: transform ${t[1]}s cubic-bezier(0, 0, 1, 1); 
		transform: translate(${t[6]}px, ${t[5]}px)`),b(o,"text-anchor","middle"),b(o,"dominant-baseline","middle"),b(o,"class","svelte-zp0nfz")},m(r,d){k(r,e,d),k(r,u,d),k(r,o,d),X(o,a),i||(f=H(e,"click",function(){ce(t[4])&&t[4].apply(this,arguments)}),i=!0)},p(r,[d]){t=r,d&98&&n!==(n=`transition: transform ${t[1]}s cubic-bezier(0, 0, 1, 1); 
		transform: translate(${t[6]}px, ${t[5]}px)`)&&b(e,"style",n),d&4&&l!==(l=`hsl(${t[2]},100%,70%)`)&&b(e,"fill",l),d&1&&b(e,"r",t[0]),d&8&&ie(a,t[3]),d&98&&s!==(s=`transition: transform ${t[1]}s cubic-bezier(0, 0, 1, 1); 
		transform: translate(${t[6]}px, ${t[5]}px)`)&&b(o,"style",s)},i:U,o:U,d(r){r&&(g(e),g(u),g(o)),i=!1,f()}}}function Ae(t,e,n){let l,u,{initialX:o}=e,{initialY:a}=e,{finalX:s}=e,{finalY:i}=e,{radius:f}=e,{time:r}=e,{hue:d}=e,{label:_}=e,{editCallback:y=()=>{}}=e;return de(()=>{(o!==s||a!==i)&&(n(6,l=s),n(5,u=i))}),t.$$set=m=>{"initialX"in m&&n(7,o=m.initialX),"initialY"in m&&n(8,a=m.initialY),"finalX"in m&&n(9,s=m.finalX),"finalY"in m&&n(10,i=m.finalY),"radius"in m&&n(0,f=m.radius),"time"in m&&n(1,r=m.time),"hue"in m&&n(2,d=m.hue),"label"in m&&n(3,_=m.label),"editCallback"in m&&n(4,y=m.editCallback)},t.$$.update=()=>{t.$$.dirty&128&&n(6,l=o),t.$$.dirty&256&&n(5,u=a)},[f,r,d,_,y,u,l,o,a,s,i]}class Pe extends V{constructor(e){super(),W(this,e,Ae,Oe,R,{initialX:7,initialY:8,finalX:9,finalY:10,radius:0,time:1,hue:2,label:3,editCallback:4})}}function ue(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function ae(t,e){let n,l,u;function o(){return e[4](e[7])}return l=new Pe({props:{initialX:e[5].position.x,initialY:e[5].position.y,finalX:e[0][e[7]].position.x,finalY:e[0][e[7]].position.y,radius:e[5].radius,hue:e[7]/e[1].length*360,label:""+e[5].mass,editCallback:o,time:e[2]}}),{key:t,first:null,c(){n=x(),O(l.$$.fragment),this.h()},l(a){n=x(),A(l.$$.fragment,a),this.h()},h(){this.first=n},m(a,s){k(a,n,s),P(l,a,s),u=!0},p(a,s){e=a;const i={};s&2&&(i.initialX=e[5].position.x),s&2&&(i.initialY=e[5].position.y),s&3&&(i.finalX=e[0][e[7]].position.x),s&3&&(i.finalY=e[0][e[7]].position.y),s&2&&(i.radius=e[5].radius),s&2&&(i.hue=e[7]/e[1].length*360),s&2&&(i.label=""+e[5].mass),s&10&&(i.editCallback=o),s&4&&(i.time=e[2]),l.$set(i)},i(a){u||(N(l.$$.fragment,a),u=!0)},o(a){E(l.$$.fragment,a),u=!1},d(a){a&&g(n),q(l,a)}}}function qe(t){let e,n=[],l=new Map,u,o=oe(t[1]);const a=s=>s[7];for(let s=0;s<o.length;s+=1){let i=ue(t,o,s),f=a(i);l.set(f,n[s]=ae(f,i))}return{c(){e=te("svg");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=ne(s,"svg",{viewBox:!0,class:!0});var i=F(e);for(let f=0;f<n.length;f+=1)n[f].l(i);i.forEach(g),this.h()},h(){b(e,"viewBox",`0 0 ${$.width} ${$.height}`),b(e,"class","svelte-s5yar4")},m(s,i){k(s,e,i);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);u=!0},p(s,[i]){i&15&&(o=oe(s[1]),me(),n=ve(n,i,a,1,s,o,l,e,ge,ae,null,ue),he())},i(s){if(!u){for(let i=0;i<o.length;i+=1)N(n[i]);u=!0}},o(s){for(let i=0;i<n.length;i+=1)E(n[i]);u=!1},d(s){s&&g(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function Ue(t,e,n){let{curBalls:l}=e,{oldBalls:u}=e,{time:o}=e,{editCallback:a}=e;const s=i=>a(i);return t.$$set=i=>{"curBalls"in i&&n(0,l=i.curBalls),"oldBalls"in i&&n(1,u=i.oldBalls),"time"in i&&n(2,o=i.time),"editCallback"in i&&n(3,a=i.editCallback)},[l,u,o,a,s]}class Le extends V{constructor(e){super(),W(this,e,Ue,qe,R,{curBalls:0,oldBalls:1,time:2,editCallback:3})}}function fe(t){let e,n="new ball",l,u;return{c(){e=z("button"),e.textContent=n},l(o){e=I(o,"BUTTON",{"data-svelte-h":!0}),ee(e)!=="svelte-1ypwwpu"&&(e.textContent=n)},m(o,a){k(o,e,a),l||(u=H(e,"click",t[8]),l=!0)},p:U,d(o){o&&g(e),l=!1,u()}}}function Fe(t){let e,n="click on a ball to edit its properties";return{c(){e=z("p"),e.textContent=n},l(l){e=I(l,"P",{"data-svelte-h":!0}),ee(e)!=="svelte-4cbsq5"&&(e.textContent=n)},m(l,u){k(l,e,u)},p:U,i:U,o:U,d(l){l&&g(e)}}}function De(t){let e,n;return e=new Te({props:{update:t[9],remove:t[10],ball:t[1][t[5]]}}),{c(){O(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,u){P(e,l,u),n=!0},p(l,u){const o={};u&34&&(o.update=l[9]),u&34&&(o.remove=l[10]),u&34&&(o.ball=l[1][l[5]]),e.$set(o)},i(l){n||(N(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function He(t){let e,n,l,u=t[0]?"run":"edit",o,a,s,i,f,r,d,_,y;e=new Le({props:{oldBalls:t[0]?t[1]:t[2],curBalls:t[0]?t[1]:t[3],time:t[0]?0:t[4],editCallback:t[0]?t[6]:re}});let m=t[0]&&fe(t);const C=[De,Fe],v=[];function B(h,c){return h[5]!==null?0:h[0]?1:-1}return~(i=B(t))&&(f=v[i]=C[i](t)),{c(){O(e.$$.fragment),n=Y(),l=z("button"),o=Q(u),a=Y(),m&&m.c(),s=Y(),f&&f.c(),r=x()},l(h){A(e.$$.fragment,h),n=S(h),l=I(h,"BUTTON",{});var c=F(l);o=Z(c,u),c.forEach(g),a=S(h),m&&m.l(h),s=S(h),f&&f.l(h),r=x()},m(h,c){P(e,h,c),k(h,n,c),k(h,l,c),X(l,o),k(h,a,c),m&&m.m(h,c),k(h,s,c),~i&&v[i].m(h,c),k(h,r,c),d=!0,_||(y=H(l,"click",t[7]),_=!0)},p(h,[c]){const p={};c&7&&(p.oldBalls=h[0]?h[1]:h[2]),c&11&&(p.curBalls=h[0]?h[1]:h[3]),c&17&&(p.time=h[0]?0:h[4]),c&1&&(p.editCallback=h[0]?h[6]:re),e.$set(p),(!d||c&1)&&u!==(u=h[0]?"run":"edit")&&ie(o,u),h[0]?m?m.p(h,c):(m=fe(h),m.c(),m.m(s.parentNode,s)):m&&(m.d(1),m=null);let j=i;i=B(h),i===j?~i&&v[i].p(h,c):(f&&(me(),E(v[j],1,1,()=>{v[j]=null}),he()),~i?(f=v[i],f?f.p(h,c):(f=v[i]=C[i](h),f.c()),N(f,1),f.m(r.parentNode,r)):f=null)},i(h){d||(N(e.$$.fragment,h),N(f),d=!0)},o(h){E(e.$$.fragment,h),E(f),d=!1},d(h){h&&(g(n),g(l),g(a),g(s),g(r)),q(e,h),m&&m.d(h),~i&&v[i].d(h),_=!1,y()}}}const re=()=>{};function Je(t,e,n){let l=!1,o=[{position:{x:11,y:11},velocity:{x:5,y:1},radius:10,mass:100},{position:{x:6,y:8},velocity:{x:1e3,y:-1},radius:.3,mass:1},{position:{x:7,y:5},velocity:{x:0,y:1},radius:.3,mass:1},{position:{x:8,y:4},velocity:{x:-2,y:1},radius:.3,mass:1},{position:{x:9,y:3},velocity:{x:0,y:1},radius:.3,mass:1}],a=o,[s,i]=G(a)||[a,"100000"],[f,r]=G(s)||[s,"0"],d=null;async function _(){d!==null&&await d,!l&&(n(2,a=s),n(3,[s,i]=[f,r],s,n(4,i)),i!=="0"&&setTimeout(_,i*1e3),d=(async()=>{[f,r]=G(s)||[s,"0"]})())}let y=null;function m(p){n(5,y=p)}function C(){n(0,l=!l),l||(v(),n(5,y=null))}function v(){n(2,a=o),n(3,[s,i]=G(a)||[a,"100000"],s,n(4,i)),[f,r]=G(s)||[s,"0"],setTimeout(_,i*1e3)}return _e(v),[l,o,a,s,i,y,m,C,()=>n(1,o=[...o,{position:{x:Math.round(Math.random()*400+50)/10,y:Math.round(Math.random()*100+25)/10},velocity:{x:10,y:10},radius:.5,mass:1}]),p=>{n(1,o[y]=p,o),n(1,o)},()=>{n(1,o=[...o.slice(0,y),...o.slice(y+1)]),n(5,y=null)}]}class Re extends V{constructor(e){super(),W(this,e,Je,He,R,{})}}function Ve(t){let e,n,l,u,o="Collision simulator",a,s,i;return s=new Re({}),{c(){e=z("meta"),n=Y(),l=z("section"),u=z("h1"),u.textContent=o,a=Y(),O(s.$$.fragment),this.h()},l(f){const r=ye("svelte-t32ptj",document.head);e=I(r,"META",{name:!0,content:!0}),r.forEach(g),n=S(f),l=I(f,"SECTION",{class:!0});var d=F(l);u=I(d,"H1",{class:!0,"data-svelte-h":!0}),ee(u)!=="svelte-1kxlq4o"&&(u.textContent=o),a=S(d),A(s.$$.fragment,d),d.forEach(g),this.h()},h(){document.title="Home",b(e,"name","description"),b(e,"content","Svelte demo app"),b(u,"class","svelte-39krom"),b(l,"class","svelte-39krom")},m(f,r){X(document.head,e),k(f,n,r),k(f,l,r),X(l,u),X(l,a),P(s,l,null),i=!0},p:U,i(f){i||(N(s.$$.fragment,f),i=!0)},o(f){E(s.$$.fragment,f),i=!1},d(f){f&&(g(n),g(l)),g(e),q(s)}}}class Qe extends V{constructor(e){super(),W(this,e,null,Ve,R,{})}}export{Qe as component,Ke as universal};
